---
const { title = "Personal Portfolio" } = Astro.props;
import Header from "../components/Header.astro";
import "../styles/global.css";
---

<!doctype html>
<!-- tambahkan class "dark" akan ditoggle via JS -->
<html lang="en" class="antialiased">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
  </head>

  <!-- Tailwind will automatically react to .dark class -->
  <body class="bg-white text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-300">
    <Header />

    <main class="min-h-screen flex justify-center">
      <div class="w-full max-w-[var(--max-width)] px-6">
        <slot />
      </div>
    </main>

    <footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-10">
      © {new Date().getFullYear()} Yoga Rizky. Built with Astro • Tailwind
    </footer>

    <!-- DARK MODE TOGGLE SCRIPT -->
  <script>
  const html = document.documentElement;

  // Default mode = LIGHT
  if (localStorage.theme === "dark") {
    html.classList.add("dark");
  } else {
    html.classList.remove("dark");
    localStorage.theme = "light"; // force default
  }

  // Listen to toggle from Header
  document.addEventListener("click", (e) => {
    if (e.target.closest("#theme-toggle")) {
      html.classList.toggle("dark");
      const isDark = html.classList.contains("dark");
      localStorage.theme = isDark ? "dark" : "light";

      document.getElementById("theme-toggle-light").classList.toggle("hidden", !isDark);
      document.getElementById("theme-toggle-dark").classList.toggle("hidden", isDark);
    }
  });
</script>

<!-- LIGHTBOX OVERLAY -->
<div id="lightbox"
  class="fixed inset-0 bg-black/70 backdrop-blur flex items-center justify-center z-[999] hidden">
  <img id="lightbox-img" class="max-w-[90%] max-h-[90%] rounded-xl shadow-lg" />
</div>

<script>
  // CLICK IMAGE -> OPEN LIGHTBOX
  document.addEventListener("click", (e) => {
    const img = e.target.closest("[data-type='product-image']");
    if (!img) return;

    const full = img.getAttribute("data-full");
    const lightbox = document.getElementById("lightbox");
    const lightboxImg = document.getElementById("lightbox-img");

    lightboxImg.src = full;
    lightbox.classList.remove("hidden");
  });

  // CLOSE LIGHTBOX WHEN CLICK OUTSIDE
  document.getElementById("lightbox").addEventListener("click", () => {
    document.getElementById("lightbox").classList.add("hidden");
  });
</script>

  </body>
</html>
