---
const { title = "Personal Portfolio" } = Astro.props;
import Header from "../components/Header.astro";
import "../styles/global.css";
---

<!doctype html>
<!-- tambahkan class "dark" akan ditoggle via JS -->
<html lang="en" class="antialiased">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
  </head>

  <!-- Tailwind will automatically react to .dark class -->
  <body class="bg-white text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-300">
    <Header />

    <main class="min-h-screen flex justify-center">
      <div class="w-full max-w-[var(--max-width)] px-6">
        <slot />
      </div>
    </main>

    <footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-10">
      © {new Date().getFullYear()} Yoga Rizky. Built with Astro • Tailwind
    </footer>

    <!-- DARK MODE TOGGLE SCRIPT -->
    <script>
      const html = document.documentElement;

      // Load saved theme
      if (
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        html.classList.add("dark");
      } else {
        html.classList.remove("dark");
      }

      // Listen to toggle button (will exist in Header)
      document.addEventListener("click", (e) => {
        if (e.target.closest("#theme-toggle")) {
          html.classList.toggle("dark");
          const isDark = html.classList.contains("dark");
          localStorage.theme = isDark ? "dark" : "light";

          // update icons
          document.getElementById("theme-toggle-light").classList.toggle("hidden", !isDark);
          document.getElementById("theme-toggle-dark").classList.toggle("hidden", isDark);
        }
      });
    </script>
  </body>
</html>
